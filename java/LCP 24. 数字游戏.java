/*
* @lc app=leetcode.cn id=1 lang=java
*
* [LCP 24] æ•°å­—æ¸¸æˆ
*
* https://leetcode.cn/problems/5TxKeK/description/
*
* algorithms
* Hard (49.35%)
* Likes:    21
* Dislikes: 0
* Total Accepted:    7.4K
* Total Submissions: 14K
* Testcase Example:  '[3,4,5,1,6,7]'
*
* å°æ‰£åœ¨ç§‹æ—¥å¸‚é›†å…¥å£å¤„å‘ç°äº†ä¸€ä¸ªæ•°å­—æ¸¸æˆã€‚ä¸»åŠæ–¹å…±æœ‰ `N` ä¸ªè®¡æ•°å™¨ï¼Œè®¡æ•°å™¨ç¼–å·ä¸º `0 ~ N-1`ã€‚æ¯ä¸ªè®¡æ•°å™¨* ä¸Šåˆ†åˆ«æ˜¾ç¤ºäº†ä¸€ä¸ªæ•°å­—ï¼Œå°æ‰£æŒ‰è®¡æ•°å™¨ç¼–å·å‡åº
* å°†æ‰€æ˜¾ç¤ºçš„æ•°å­—è®°äºæ•°ç»„ `nums`ã€‚æ¯ä¸ªè®¡æ•°å™¨ä¸Šæœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«å¯ä»¥å®ç°å°†æ˜¾ç¤ºæ•°å­—åŠ ä¸€æˆ–å‡ä¸€ã€‚å°æ‰£æ¯ä¸€æ¬¡* æ“ä½œå¯ä»¥é€‰æ‹©ä¸€ä¸ªè®¡æ•°å™¨ï¼ŒæŒ‰ä¸‹åŠ ä¸€æˆ–å‡ä¸€æŒ‰é’®ã€‚
*
* ä¸»åŠæ–¹è¯·å°æ‰£å›ç­”å‡ºä¸€ä¸ªé•¿åº¦ä¸º `N` çš„æ•°ç»„ï¼Œç¬¬ `i` ä¸ªå…ƒç´ (0 <= i < N)è¡¨ç¤ºå°† `0~i` å·è®¡æ•°å™¨ **åˆå§‹** * æ‰€ç¤ºæ•°å­—æ“ä½œæˆæ»¡è¶³æ‰€æœ‰æ¡
* ä»¶ `nums[a]+1 == nums[a+1],(0 <= a < i)` çš„æœ€å°æ“ä½œæ•°ã€‚å›ç­”æ­£ç¡®æ–¹å¯è¿›å…¥ç§‹æ—¥å¸‚é›†ã€‚
*
* ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·å°†æ¯ä¸ªæœ€å°æ“ä½œæ•°å¯¹ `1,000,000,007` å–ä½™ã€‚
*
* ç¤ºä¾‹ 1ï¼š
*
* è¾“å…¥ï¼š`nums = [3,4,5,1,6,7]`
*
* è¾“å‡ºï¼š`[0,0,0,5,6,7]`
*
* è§£é‡Šï¼š
* i = 0ï¼Œ[3] æ— éœ€æ“ä½œ
* i = 1ï¼Œ[3,4] æ— éœ€æ“ä½œï¼›
* i = 2ï¼Œ[3,4,5] æ— éœ€æ“ä½œï¼›
* i = 3ï¼Œå°† [3,4,5,1] æ“ä½œæˆ [3,4,5,6], æœ€å°‘ 5 æ¬¡æ“ä½œï¼›
* i = 4ï¼Œå°† [3,4,5,1,6] æ“ä½œæˆ [3,4,5,6,7], æœ€å°‘ 6 æ¬¡æ“ä½œï¼›
* i = 5ï¼Œå°† [3,4,5,1,6,7] æ“ä½œæˆ [3,4,5,6,7,8]ï¼Œæœ€å°‘ 7 æ¬¡æ“ä½œï¼›
* è¿”å› [0,0,0,5,6,7]ã€‚
*
* ç¤ºä¾‹ 2ï¼š
*
* è¾“å…¥ï¼š`nums = [1,2,3,4,5]`
*
* è¾“å‡ºï¼š`[0,0,0,0,0]`
*
* è§£é‡Šï¼šå¯¹äºä»»æ„è®¡æ•°å™¨ç¼–å· i éƒ½æ— éœ€æ“ä½œã€‚
*
* ç¤ºä¾‹ 3ï¼š
*
* è¾“å…¥ï¼š`nums = [1,1,1,2,3,4]`
*
* è¾“å‡ºï¼š`[0,1,2,3,3,3]`
*
* è§£é‡Šï¼š
* i = 0ï¼Œæ— éœ€æ“ä½œï¼›
* i = 1ï¼Œå°† [1,1] æ“ä½œæˆ [1,2] æˆ– [0,1] æœ€å°‘ 1 æ¬¡æ“ä½œï¼›
* i = 2ï¼Œå°† [1,1,1] æ“ä½œæˆ [1,2,3] æˆ– [0,1,2]ï¼Œæœ€å°‘ 2 æ¬¡æ“ä½œï¼›
* i = 3ï¼Œå°† [1,1,1,2] æ“ä½œæˆ [1,2,3,4] æˆ– [0,1,2,3]ï¼Œæœ€å°‘ 3 æ¬¡æ“ä½œï¼›
* i = 4ï¼Œå°† [1,1,1,2,3] æ“ä½œæˆ [-1,0,1,2,3]ï¼Œæœ€å°‘ 3 æ¬¡æ“ä½œï¼›
* i = 5ï¼Œå°† [1,1,1,2,3,4] æ“ä½œæˆ [-1,0,1,2,3,4]ï¼Œæœ€å°‘ 3 æ¬¡æ“ä½œï¼›
* è¿”å› [0,1,2,3,3,3]ã€‚
*
* æç¤ºï¼š
* 1 <= nums.length <= 10^5
* 1 <= nums[i] <= 10^3
*
* Related Topics æ•°ç»„ æ•°å­¦ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ 
* ğŸ‘ 43 ğŸ‘ 0
*/

// @lc code=start
import java.util.PriorityQueue;

class Solution {
    private static final int MOD = 1000000007;

    public int[] numsGame(int[] nums) {
        int n = nums.length;
        int[] result = new int[n];

        PriorityQueue<Integer> lowers = new PriorityQueue<>((a, b) -> b - a);
        PriorityQueue<Integer> highers = new PriorityQueue<>((a, b) -> a - b);

        long lowerSum = 0, higherSum = 0;
        for (int i = 0; i < n; i++) {
            int num = nums[i] - i;
            if (lowers.isEmpty() || num <= lowers.peek()) {
                lowers.offer(num);
                lowerSum += num;

                if (lowers.size() > highers.size() + 1) {
                    highers.offer(lowers.poll());
                    lowerSum -= highers.peek();
                    higherSum += highers.peek();
                }
            } else {
                highers.offer(num);
                higherSum += num;

                if (highers.size() > lowers.size()) {
                    lowers.offer(highers.poll());
                    higherSum -= lowers.peek();
                    lowerSum += lowers.peek();
                }
            }

            if ((i + 1) % 2 == 0) {
                result[i] = (int) ((higherSum - lowerSum) % MOD);
            } else {
                result[i] = (int) ((higherSum - lowerSum + lowers.peek()) % MOD);
            }
        }

        return result;
    }
}
// @lc code=end